<!DOCTYPE html>
<head>
<title>Page Title</title>

</head>

<body>
<canvas id="a" width="500" height="500" style="border:1px dotted;" onclick="draw_b();return false"></canvas>
<script type="text/javascript">

	window.requestAnimFrame = (function(callback) {
        return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
        function(callback) {
          window.setTimeout(callback, 1000 / 60);
        };
    })();

	
	function drawCircle(pos, context)
	{
		context.beginPath();
		context.arc(pos.x, pos.y, 20, 0, Math.PI * 2);
		context.fillStyle="#8ed6ff";
		context.fill();
		context.stroke();
	
	}
	
	function updateVectorField(field)
	{
		for( var i=0;i<field.length;i++)
		{
			for(var j=0;j<field[j].length;j++)
			{
				
			
			
			}
		
		
		}
	
	}
	
	function initVectorField()
	{
		var x = new Array(50);
		
		for(var i=0;i<50;i++)
		{
			x[i] = new Array(50);
			for(var j = 0;j<50;j++)
			{
				x[j] = {x:0,y:0};
			}
		}
		
		return x;
	
	
	}
	
	function initPressureField()
	{
		var x = new Array(50);
		
		for(var i=0;i<50;i++)
		{
			x[i] = new Array(50);
			for(var j = 0;j<50;j++)
			{
				x[j] = 0;
			}
		}
		
		return x;
	
	
	}
	
	function getMousePos(canvas, evt) {
        var rect = canvas.getBoundingClientRect();
        return {
          x: evt.clientX - rect.left,
          y: evt.clientY - rect.top
        };
      }
	
	function animate(pos, canvas, context, startTime) {
        // update
        var time = (new Date()).getTime() - startTime;

        var linearSpeed = 100;
        // pixels / second
        pos.x = pos.x + (mousePos.x - pos.x)/20;
		pos.y = pos.y + (mousePos.y - pos.y)/20;

        // clear
        context.clearRect(0, 0, canvas.width, canvas.height);

       drawCircle(pos,context);
	   
        // request new frame
        requestAnimFrame(function() {
          animate(pos, canvas, context, startTime);
        });
    }
	
	var mousePos = {x:50 , y: 50};
	var pos = { x : 20 , y: 20};
	var canvas = document.getElementById('a');
	var context = canvas.getContext("2d");
	var startTime = (new Date()).getTime();
	var field = initVectorField();
	
	canvas.addEventListener('mousemove', function(evt) {
        mousePos = getMousePos(canvas, evt);
        
      }, false);
	  
	  
	animate(pos, canvas, context, startTime);


</script>
</body>